<html lang="zh_CN"><head><meta charset="utf-8" /><title>思考tidb精简版</title><link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" /></head><body><div class="navbar navbar-inverse"><div class="container"><div class="collapse navbar-collapse"><ul class="nav navbar-nav"><li><a href="/">Home</a></li><li><a href="/index">Blog</a></li><li><a href="/project">Project</a></li><li><a href="/about">About</a></li><li><a href="/feed.atom">Rss</a></li></ul></div></div></div><div class="container"><div class="row row-offcanvas row-offcanvas-right"><div class="col-sm-9"><div id="content"><h1 id="Title">思考tidb精简版</h1><p>2025-03-09</p><p>很久都没有思考过，tidb 在架构方面的改动。因为架构改动都是伤筋动骨的，而现在的 tidb 已经越来越复杂了，改不动了。
最近跟同事有聊到这个点:如果我们回到当初创业阶段，重新来过，做一个精简版的 tidb，会有哪些变化。所以有一个契机思考这样的问题。先说结论是我没想到啥明确的结论，这篇博客只是头脑风暴把自己一些思考过程记录下来。</p><h2>ART (Adaptive Radix Tree)</h2><p>首先想到的是一个 KV 数据结构，ADT(Adaptive Radix Tree)。也有一些内存数据库的核心数据结构是基于它的，然后 tidb 最近的版本中也有一个优化，是把 unistore 那一层从一个定制化的 rbtree 改成了 ADT。</p><p>传统的存储引擎中会用 BTree，或者是 skiplist+LSM 这种结构，反正不管哪种，总是需要一个 kv 的数据结构的。那为什么会想到 ART 呢？因为如果我们<strong>只考虑内存 kv 结构的读写性能，怎么样得到最好的性能呢？核心问题其实是怎么样最好的支持并发</strong>！
kv 的数据结构太多了，然后 hash 类的 O(1) 由于不好支持 range，要排除在外，最后算法复杂度就都是 O(logN) 了，如果纯考虑内存情况，关键点是在并发读写。而最容易并发读写的关键点是什么？是使用无锁数据结构，或者说 immutable，copy-on-write 这些关键词。只有尽量无锁，才能高并发，只支持高并发，才是纯内存角度下性能的关键。在单线程下，大家同样是 O(logN) 的算法。而在多线程下，假设写直接将读卡住，那么性能直接就 sb 了，锁是不 scale 的。只有无锁并发的结构才能 scale。</p><p>所以如果重新选择内存层的数据表示，我会想到 ART。</p><p>正好读到过 clojure 的 vector 的一篇博客，贴一个<a href="https://hypirion.com/musings/understanding-persistent-vector-pt-1">链接</a>过来。跟本文内容没有直接关系，但是背后的关键点都是，什么样的数据结构，是最好的支持并发的: immutable 的数据结构。</p><h2>以log为中心</h2><p>以 log 为中心，这个基本上是所有云原生数据库系统达成共识了。在 Aurora 出来的时候就是，共享一套 log。我之前说过，在最近几年里面，读过的最好的内容就是周sir的<a href="/cloud-native-architecture.md">下一代云原生数据库设计</a>，这也已经是 tidb cloud 当前实际使用的架构了。</p><p>对于单机的数据库，log 就是 WAL 的 log。对于 tidb，就是 raft log，准确来说应该是 commit 操作对应的 log。只要把 log 的回放就可以得到原本的数据库快照，cdc 也是这样回放来的。只要把其中简单的 key range 的子集回放，就是 Aurora 某个租户的概念。
一旦到 log 这一层之后，就是确定性的，不会涉及到事务，没有冲突。</p><p>以 log 为中心，读和写就是分离的路径，读写解耦合，读可以无限扩展，因为从 log 中回放出多份副本，就支持读操作的 scale。</p><h2>tidb变成缓存</h2><p>我们思考一下，怎么样得到最好的读性能？当 log 是所谓的 single source of truth 之后，我们还需要一个 kv 层，只不过它是相当于缓存，而真实的数据就是 log 本身。</p><p>SQL 层和 KV 层并合，也就是对于 tidb 的架构来讲，就是把 tikv 的 kv 层挪到跟 tidb 的 SQL 层在一起，这样就没有从 tidb 去访问 tikv 的一次网络开销。类似于 cockroachdb，它就是把不同的层，放到同一个实例里面的。我们如果把部署改成 tikv 跟 tidb 部署在同一个节点，也等价于可以消除这一层的网络开销。</p><p>假设我们是一个单机的数据库的时候，大概就是这种形态。假设有多个副本的时候，在另一个副本上面写入，那么 log 会不停地追加，如何保证读这个副本能读到最新的数据？我们可以在读之前，取一下最新的 log 的序列号到多少了，然后保证这个副本上面，log apply 已经大于等于该序号，就可以保证读到的数据没问题，snapshot read。这个取一个最新的 log 序号到了多少的过程，跟我们在 tidb 分布式系统中取 tso 也是本质上一样的东西，省不掉。</p><p>看到这里的时候，好像一切都很美好，我们只要把 pd / tidb / tikv 都单机部署，就相当于回到了一个单机数据库，访问网络或者取 tso 的开销都可以相当于忽略。
而且如果我们以 log 为中心，多个这样的数据库(pd + tidb + tikv)，共享着相同的 log (pd 的取 tso 变成取最新的 log 序号)，在 log apply 之后变成相同的副本，提供读能力，读性能几乎是完美等于单机数据库的。</p><p>那么为什么不这么干，问题是呢？</p><h2>replication和shard</h2><p>分布式系统里面，非常关键的两个概念，分片(shard)和副本(replication)。</p><p>为什么我们需要副本？因为有可能分布式环境里面某个节点挂了，其它节点需要能够顶上，于是就需要副本保证可用性。分布式环境里面的假设，挂点都是随时会挂的，不能让整体系统变得不可用。多副本就引入了多副本的一致性问题，于是引入了共识，引入了 paxos 和 raft 这些。
还是先回到前面很美好的假设: 以 log 为中心，通过 apply log 就可以提供数据库的副本快照，读性能无限扩展还没有延迟的损失。但是这只提到了副本的概念，却没有提分片的概念！</p><p>假设数据量很小，所有数据都是单机能承受的，那么这么干就可以了。然而现实是骨感的，为什么会需要分布式，会需要分片？因为数据量太大了放不下呀。而一旦涉及到分片之后，前面美好的假设瞬间就都没有了。</p><p>于是每个 tikv 只存储了一部分的 key range 的数据，由许许多多的 tikv 共同完成全量的 key range。而 tidb 则需要访问许多个不同的 tikv 的分片，才能拼凑出一个查询请求的结果。</p><p>分层的好处是，tidb 跟 tikv 不需要 1:1，tidb 是无状态，也不缓存数据的。由于分层，带来的开销是，查询请求 tidb，数据都不是在本地，网络带来很大的影响。以 update 为例，update 之前往往需要知道之前的数据是啥，需要基于之前的数据修改，于是这里需要先从 tikv 读取一次，然后才能写入。更悲催的是 index lookup 这样的场景，先读 index 需要一次网络访问，而拿到 index 结果之后还需要再次回表访问 tikv 才能得到数据，这相对单机数据库的性能就是两次网络，两次磁盘读。而在单机数据库中，不需要网络，甚至有可能磁盘读都只有1次，比如说 index 在内存的话。所以当分布式之后，引入的延迟差异特别明显。</p><p>所以结论是，<strong>replication 不影响读性能，但是 shard 非常影响性能</strong>，而对分布式数据库的场景，shard 是不可避免的。</p><p>读的影响其实还是小头，要说对写入的影响，分布式(分片)就更严重了。</p><h2>2PC 能否去除</h2><p>写入路径跟读路径不一样，<strong>由于有副本，我们需要有 raft。由于有分片，我们需要有 2PC。这两者叠加到一起后，延迟拉满</strong>。</p><p>以 tidb 为例，让我们分析一下，一次事务提交的开销。</p><ul><li>首先，由于需要有全局的事务定序，每个事务要从 pd 取 start ts 和 commit ts，这是两次网络开销。</li><li>然后2PC 的事务，它是涉及 prewrite 和 commit 两个阶段的操作的，我们先看 prewrite。</li><li>从 tidb 发送 prewrite 请求到 tikv，这是一次网络开销。</li><li>接着，tikv 收到 prewrite 请求之后，它需要写一些 kv 的 key，这至少是一次磁盘。</li><li>由于每个 key 对应 region 都是有多副本的，所以要走 raft 协议。raft 协议需要同步多副本并且收到多数派应答，这个是请求是并发的，我们只把它算成一次网络，实际的耗时会比一次略久一点，因为有的节点快，有的节点慢。</li><li>然后 raft 的协议细节中，副本在做应答也是要写 log 的，这又是一次磁盘。</li><li>所以整个 prewrite 过程至少是两次网络，两次磁盘的。</li><li>commit 的过程跟 prewrite 过程基本是一模一样，就不用分析细节了，也是两次网络，两次磁盘。</li></ul><p>oh my god! 整个过程算下来，至少是 6 次网络，4 次磁盘的，不知道我有没有漏掉啥的。所以 2PC 这是慢的根源啊！分布式事务的写路径太复杂了，延迟不高才怪了。</p><p>所以我想，能不能绕过 2PC 呢，于是我想起来之前读过的一篇论文，它是跟 Spanner 同年发的，采用的完全不一样的思路，它就是 <a href="/calvin.md">calvin</a>。</p><h2>再看 calvin</h2><p>calvin 采用完全不一样的思路是，它不采用 2PC，而是提前给事务确定性地排序和检测冲突。这样它就没有 2PC 的代价了。相比 spanner 或者 tidb 这种，它多出来了事务排序和冲突检查那一层，做完这一步之后，事务的提交就是确定性的写入，写入到 log 了。</p><p>calvin 具体的如何实现确定的事务排序，细节我没有理解得很清楚，不过据说它的限制很强，不能支持 begin ... commit 这种交互性事务了，于是在 SQL 语义这边是玩不转的。作者<a href="https://dbmsmusings.blogspot.com/2019/01/its-time-to-move-on-from-two-phase.html">对 2PC 的批评</a>很透彻，我们倒是可以看一看他是怎么说的。两阶段提交中，会有参与者(workers)和协调者(coordinator)，如果 work 投了 yes，然后它挂了怎么办？因此必须涉及到将自己的投票持久化的(这是一次磁盘io的来源)。</p><p>两阶段提交有两个问题，第一个叫 &quot;blocking problem&quot;，假设所有的 worker 都投了 yes，但是 coordinator 挂了。注意，coordinator 是具有绝对权力的，而 worker 一旦投票了，是没有机会再修改的，于是这时就会出现系统卡住的状态，除非 coordinator 恢复，否则无法继续推进。</p><p>第二个问题叫 &quot;cloggage problem&quot;，这个问题不像前一类那么广为人知。两阶段提交是在事务处理中，<strong>事务的延迟会上升，因为要经历 prewrite 和 commit 两个阶段。而这期间事务的最终状态并不可知，因此它是需要阻止其它事务的，只有当 2PC 完成之后，被这个事务两阶段提交阻止的事务才能继续推进。这会进一步地增加延迟，降低吞吐</strong>。</p><p>所以 calvin 给出的解法就是不要 2PC，而是在前期做事务的冲突检测，处理完之后不会发生冲突，直接到 log 层。</p><h2>foundation db</h2><p>推演到这一步，我觉得还是很对我的味口的，以 log 为中心，然后把 2PC 和 raft 那一坨东西，都变成前期的事务冲突检测。</p><p>从某种角度来看，tidb 也是以 log 为中心，只不过它的实现路径用 2PC + raft 来完成事务的冲突检测的。Aurora 也是 log 为中心，但是它是1写多读的，实际上绕开了分布式事务那一层，但缺点是写入性能不能水平扩展了。</p><p>在查资料的过程中，我读到另一个有趣设计，它就是 foundation db。非常巧合，这个设计几乎跟我推导得到的架构一模一样。log 之后都没有什么好说的，它是把事务跟 log 解耦开了的。关键点就是原文里面的 resolver 那一层，是一个事务冲突处理层。</p><p>我们假设客户端向两个不同的实例提交分布式事务，事务的修改涉及重叠的 key range，如何进行冲突检测呢？只要把两个实例上面的事务的修改集，都发送到另外的一个节点上面，该节点就拥有全部冲突检查需要的信息了。在 foundation db 里面这个就是 resolver，前面不同的 proxy 层会把事务修改集发送到 resolver 层进行集中的冲突检查，然后确认事务没冲突后就可以再发送到 log server 以及进一步到 storage server。</p><p>我们来计算一下这种模式下的写入路径的开销。</p><ul><li>事务定序跟 tidb 那边需要取两次 tso 是一样的，两次网络。</li><li>数据发送到 resolver 进行事务冲突检测，需要一次网络。</li><li>在 resolver 中的冲突检测是全内存的，不涉及磁盘。这比走 2PC+raft 写盘和网络要快得多，而且没有 cloggage problem</li><li>从 reslover 到 log server，一次网络</li><li>log server 的持久化，一次磁盘</li></ul><p>到了 log server 之后的事情都是可以异步的，也就是说 log 记录成功后就可以返回给客户端了，后面的事情不影响写入延迟。所以 foundation db 这边总共是 4 次网络，1 次磁盘。</p><p>既然聊到了 log 完成后就算完成，而不是 storage server 完成算完成，那么就不得不再提一下优化的概念。tidb 那边 6 次网络，4 次磁盘，是按完全没有优化的情况下计算的。之前我写过<a href="/tidb-transaction-evoluation.md">TiDB 的事务模块演进</a> 在 TiDB 5.0 里面有一个很重要的优化，叫 async commit，在这个优化之后，2PC 里面可以不用等待 prewrite + commit 完成，而是在 prewrite 完成后，直接回答客户端写入完成，然后异步去执行 commit。这样直接节省了两次网络两次磁盘，于是就是 4 次网络，2 次磁盘了，比 foundation db 已经没有太本质的落后了。然后如果 1PC 或者优化掉 commit ts，则进一步节省一次网络，变成 3 次网络 2 次磁盘。</p><p>这么想好像 tidb 当前的架构设计也还是挺牛X 的，相比 foundation db 这种确定性事务，差异只在把事务冲突检查放在预告处理层还是 2PC 层的区别？其实，应该说在无冲突场景下，平均延迟或者 P80 可能两种不同设计并不会导致特别大的写入延迟上的差距。但是在冲突场景下，foundation db 的模型一定更优，为什么？因为它冲突检查是全内存操作，失败的代价是更小的。而 tidb 这边在发生冲突的情况下，能检查到冲突的时期更晚，数据写入和 raft 开销是沉没成本，所以冲突的代价更高。当然，这里还涉及其它因素，乐观悲观事务之类的，准确对比只能说大家都是乐观事务的场景l下的对比。冲突延迟越早做，越是在内存做，发生冲突后的处理代价就越低，长尾延迟就更低。</p><h2>继续细化场景</h2><p>foundation db 的架构好像已经是最优的了。但是我们可以换一个角度再来思考一下。</p><p>单机数据库和分布式数据库，单机的性能更优。因为分布式一定涉及分片，涉及分片就导致需要 2PC，也就是导致性能问题的关键。
所以我们在一个角度是说，能不能干掉 2PC，从而得到更好的性能。也就是像 foundation db 那样把事务冲突处理放到前面一层。
换成另一个角度是，能不能没有分片，于是从需求侧干掉 2PC，从而更好的性能。</p><p>实际的用户场景中，很多都是数据库表并没有那么大，并不需要用上分布式数据库，比如单机 mysql 也能够胜任。只不过国产化替代这种场景，那么对应的需求就是库比较多，减少运维成本，比如说一套部署就能全搞定。
如果纯粹这种场景，可能 Aurora 的架构更优。不过考虑国内情况，都不愿意把数据放到云上，而是需要私有化部署。</p><p>这些细化的场景也是一些架构适配的可能性，只要数据量不大，就可以不用分片，就可以有一些其它的设计空间。最好的情况，是即能支持分布式，又能像集中式那边对小库小表消除分布式的开销，性能好，管理和运维的成本还低...细节还没想明白，反正烧死了不少脑细胞了，就先思考和记录到这里吧。</p></div><div><a href="/tags/tidb" class="btn btn-info btn-xs">tidb</a><ul class="pager" /></div></div><div class="col-sm-3" id="sidebar" role="navigation"><div class="well sidebar-nav"><h2 id="nav-pills">Category</h2><ul class="nav nav-pills nav-stacked"><li><a href="/category/编译器">编译器</a></li><li><a href="/category/编程语言">编程语言</a></li><li><a href="/category/高性能服务器">高性能服务器</a></li><li><a href="/category/分布式">分布式</a></li><li><a href="/category/Android游戏开发">Android游戏开发</a></li></ul><h2 id="nav-pills">Tags</h2><a href="/tags/lisp" class="btn btn-info btn-xs">lisp</a><a href="/tags/源代码分析" class="btn btn-info btn-xs">源代码分析</a><a href="/tags/chibi-scheme" class="btn btn-info btn-xs">chibi-scheme</a><a href="/tags/golang" class="btn btn-info btn-xs">golang</a><a href="/tags/rbtree" class="btn btn-info btn-xs">rbtree</a><a href="/tags/mempool" class="btn btn-info btn-xs">mempool</a><a href="/tags/hash" class="btn btn-info btn-xs">hash</a><a href="/tags/task" class="btn btn-info btn-xs">task</a><a href="/tags/协程" class="btn btn-info btn-xs">协程</a><a href="/tags/skynet" class="btn btn-info btn-xs">skynet</a><a href="/tags/beansdb" class="btn btn-info btn-xs">beansdb</a><a href="/tags/actor模型" class="btn btn-info btn-xs">actor模型</a><a href="/tags/lease" class="btn btn-info btn-xs">lease</a><a href="/tags/paxos" class="btn btn-info btn-xs">paxos</a><a href="/tags/面试题" class="btn btn-info btn-xs">面试题</a><a href="/tags/linux" class="btn btn-info btn-xs">linux</a><a href="/tags/org-mode" class="btn btn-info btn-xs">org-mode</a><a href="/tags/blog" class="btn btn-info btn-xs">blog</a><a href="/tags/编码" class="btn btn-info btn-xs">编码</a><a href="/tags/java" class="btn btn-info btn-xs">java</a><a href="/tags/地图编辑器" class="btn btn-info btn-xs">地图编辑器</a><a href="/tags/关卡生成" class="btn btn-info btn-xs">关卡生成</a><a href="/tags/tiled" class="btn btn-info btn-xs">tiled</a><a href="/tags/primitive" class="btn btn-info btn-xs">primitive</a><a href="/tags/scheme" class="btn btn-info btn-xs">scheme</a><a href="/tags/petrescue" class="btn btn-info btn-xs">petrescue</a><a href="/tags/读书笔记" class="btn btn-info btn-xs">读书笔记</a><a href="/tags/eopl" class="btn btn-info btn-xs">eopl</a><a href="/tags/CAS" class="btn btn-info btn-xs">CAS</a><a href="/tags/无锁" class="btn btn-info btn-xs">无锁</a><a href="/tags/数据结构" class="btn btn-info btn-xs">数据结构</a><a href="/tags/FP" class="btn btn-info btn-xs">FP</a><a href="/tags/多值返回" class="btn btn-info btn-xs">多值返回</a><a href="/tags/lambda" class="btn btn-info btn-xs">lambda</a><a href="/tags/AssetManager" class="btn btn-info btn-xs">AssetManager</a><a href="/tags/libgdx" class="btn btn-info btn-xs">libgdx</a><a href="/tags/pprof" class="btn btn-info btn-xs">pprof</a><a href="/tags/微博数据分析" class="btn btn-info btn-xs">微博数据分析</a><a href="/tags/cdn" class="btn btn-info btn-xs">cdn</a><a href="/tags/云风" class="btn btn-info btn-xs">云风</a><a href="/tags/hive" class="btn btn-info btn-xs">hive</a><a href="/tags/调度器" class="btn btn-info btn-xs">调度器</a><a href="/tags/flash" class="btn btn-info btn-xs">flash</a><a href="/tags/planeshift" class="btn btn-info btn-xs">planeshift</a><a href="/tags/分段栈" class="btn btn-info btn-xs">分段栈</a><a href="/tags/terminal" class="btn btn-info btn-xs">terminal</a><a href="/tags/godit" class="btn btn-info btn-xs">godit</a><a href="/tags/转载" class="btn btn-info btn-xs">转载</a><a href="/tags/OpenGL" class="btn btn-info btn-xs">OpenGL</a><a href="/tags/年终总结" class="btn btn-info btn-xs">年终总结</a><a href="/tags/翻译" class="btn btn-info btn-xs">翻译</a><a href="/tags/facebook" class="btn btn-info btn-xs">facebook</a><a href="/tags/编程感悟" class="btn btn-info btn-xs">编程感悟</a><a href="/tags/架构" class="btn btn-info btn-xs">架构</a><a href="/tags/C" class="btn btn-info btn-xs">C</a><a href="/tags/CSP" class="btn btn-info btn-xs">CSP</a><a href="/tags/acme" class="btn btn-info btn-xs">acme</a><a href="/tags/编辑器" class="btn btn-info btn-xs">编辑器</a><a href="/tags/devdraw" class="btn btn-info btn-xs">devdraw</a><a href="/tags/mmorpg" class="btn btn-info btn-xs">mmorpg</a><a href="/tags/ouster" class="btn btn-info btn-xs">ouster</a><a href="/tags/一致性" class="btn btn-info btn-xs">一致性</a><a href="/tags/翻墙" class="btn btn-info btn-xs">翻墙</a><a href="/tags/n6bagent" class="btn btn-info btn-xs">n6bagent</a><a href="/tags/性能优化" class="btn btn-info btn-xs">性能优化</a><a href="/tags/继承" class="btn btn-info btn-xs">继承</a><a href="/tags/接口" class="btn btn-info btn-xs">接口</a><a href="/tags/DSP" class="btn btn-info btn-xs">DSP</a><a href="/tags/aerospike" class="btn btn-info btn-xs">aerospike</a><a href="/tags/kv" class="btn btn-info btn-xs">kv</a><a href="/tags/ssd" class="btn btn-info btn-xs">ssd</a><a href="/tags/raft" class="btn btn-info btn-xs">raft</a><a href="/tags/overcommit" class="btn btn-info btn-xs">overcommit</a><a href="/tags/nosql" class="btn btn-info btn-xs">nosql</a><a href="/tags/coroutine" class="btn btn-info btn-xs">coroutine</a><a href="/tags/plan9" class="btn btn-info btn-xs">plan9</a><a href="/tags/grt" class="btn btn-info btn-xs">grt</a><a href="/tags/database" class="btn btn-info btn-xs">database</a><a href="/tags/垃圾回收" class="btn btn-info btn-xs">垃圾回收</a><a href="/tags/lambda演算" class="btn btn-info btn-xs">lambda演算</a><a href="/tags/网络编程" class="btn btn-info btn-xs">网络编程</a><a href="/tags/epoll" class="btn btn-info btn-xs">epoll</a><a href="/tags/select" class="btn btn-info btn-xs">select</a><a href="/tags/io模型" class="btn btn-info btn-xs">io模型</a><a href="/tags/阻塞" class="btn btn-info btn-xs">阻塞</a><a href="/tags/同步" class="btn btn-info btn-xs">同步</a><a href="/tags/dynomite" class="btn btn-info btn-xs">dynomite</a><a href="/tags/session" class="btn btn-info btn-xs">session</a><a href="/tags/beego" class="btn btn-info btn-xs">beego</a><a href="/tags/codis" class="btn btn-info btn-xs">codis</a><a href="/tags/ycombinator" class="btn btn-info btn-xs">ycombinator</a><a href="/tags/热重启" class="btn btn-info btn-xs">热重启</a><a href="/tags/跳表" class="btn btn-info btn-xs">跳表</a><a href="/tags/skiplist" class="btn btn-info btn-xs">skiplist</a><a href="/tags/监控" class="btn btn-info btn-xs">监控</a><a href="/tags/zipkin" class="btn btn-info btn-xs">zipkin</a><a href="/tags/influxdb" class="btn btn-info btn-xs">influxdb</a><a href="/tags/heka" class="btn btn-info btn-xs">heka</a><a href="/tags/分布式跟踪" class="btn btn-info btn-xs">分布式跟踪</a><a href="/tags/bug" class="btn btn-info btn-xs">bug</a><a href="/tags/gorilla" class="btn btn-info btn-xs">gorilla</a><a href="/tags/middleware" class="btn btn-info btn-xs">middleware</a><a href="/tags/http" class="btn btn-info btn-xs">http</a><a href="/tags/object" class="btn btn-info btn-xs">object</a><a href="/tags/closure" class="btn btn-info btn-xs">closure</a><a href="/tags/nanopass" class="btn btn-info btn-xs">nanopass</a><a href="/tags/位运算" class="btn btn-info btn-xs">位运算</a><a href="/tags/swapcontext" class="btn btn-info btn-xs">swapcontext</a><a href="/tags/汇编" class="btn btn-info btn-xs">汇编</a><a href="/tags/trampoline" class="btn btn-info btn-xs">trampoline</a><a href="/tags/cps" class="btn btn-info btn-xs">cps</a><a href="/tags/continuation" class="btn btn-info btn-xs">continuation</a><a href="/tags/callback" class="btn btn-info btn-xs">callback</a><a href="/tags/closure-convert" class="btn btn-info btn-xs">closure-convert</a><a href="/tags/redis" class="btn btn-info btn-xs">redis</a><a href="/tags/逻辑时钟" class="btn btn-info btn-xs">逻辑时钟</a><a href="/tags/logical clock" class="btn btn-info btn-xs">logical clock</a><a href="/tags/服务发现" class="btn btn-info btn-xs">服务发现</a><a href="/tags/配置中心" class="btn btn-info btn-xs">配置中心</a><a href="/tags/chicken" class="btn btn-info btn-xs">chicken</a><a href="/tags/调试" class="btn btn-info btn-xs">调试</a><a href="/tags/VM" class="btn btn-info btn-xs">VM</a><a href="/tags/srfi-18" class="btn btn-info btn-xs">srfi-18</a><a href="/tags/call/cc" class="btn btn-info btn-xs">call/cc</a><a href="/tags/p2p" class="btn btn-info btn-xs">p2p</a><a href="/tags/delivery" class="btn btn-info btn-xs">delivery</a><a href="/tags/动态规划" class="btn btn-info btn-xs">动态规划</a><a href="/tags/网络" class="btn btn-info btn-xs">网络</a><a href="/tags/lua" class="btn btn-info btn-xs">lua</a><a href="/tags/sql" class="btn btn-info btn-xs">sql</a><a href="/tags/cockroachdb" class="btn btn-info btn-xs">cockroachdb</a><a href="/tags/isolation" class="btn btn-info btn-xs">isolation</a><a href="/tags/snapshot" class="btn btn-info btn-xs">snapshot</a><a href="/tags/serializable" class="btn btn-info btn-xs">serializable</a><a href="/tags/链表" class="btn btn-info btn-xs">链表</a><a href="/tags/ltask" class="btn btn-info btn-xs">ltask</a><a href="/tags/channel" class="btn btn-info btn-xs">channel</a><a href="/tags/leetcode" class="btn btn-info btn-xs">leetcode</a><a href="/tags/Rust" class="btn btn-info btn-xs">Rust</a><a href="/tags/socket" class="btn btn-info btn-xs">socket</a><a href="/tags/interpret" class="btn btn-info btn-xs">interpret</a><a href="/tags/可串行化" class="btn btn-info btn-xs">可串行化</a><a href="/tags/spanner" class="btn btn-info btn-xs">spanner</a><a href="/tags/分布式" class="btn btn-info btn-xs">分布式</a><a href="/tags/transaction" class="btn btn-info btn-xs">transaction</a><a href="/tags/SQL" class="btn btn-info btn-xs">SQL</a><a href="/tags/parser" class="btn btn-info btn-xs">parser</a><a href="/tags/内存池" class="btn btn-info btn-xs">内存池</a><a href="/tags/allocator" class="btn btn-info btn-xs">allocator</a><a href="/tags/combinator" class="btn btn-info btn-xs">combinator</a><a href="/tags/monad" class="btn btn-info btn-xs">monad</a><a href="/tags/ocaml" class="btn btn-info btn-xs">ocaml</a><a href="/tags/abstract machine" class="btn btn-info btn-xs">abstract machine</a><a href="/tags/ZINC" class="btn btn-info btn-xs">ZINC</a><a href="/tags/currying" class="btn btn-info btn-xs">currying</a><a href="/tags/type infer" class="btn btn-info btn-xs">type infer</a><a href="/tags/HM" class="btn btn-info btn-xs">HM</a><a href="/tags/类型系统" class="btn btn-info btn-xs">类型系统</a><a href="/tags/leak" class="btn btn-info btn-xs">leak</a><a href="/tags/reset" class="btn btn-info btn-xs">reset</a><a href="/tags/shift" class="btn btn-info btn-xs">shift</a><a href="/tags/delimited" class="btn btn-info btn-xs">delimited</a><a href="/tags/dectect" class="btn btn-info btn-xs">dectect</a><a href="/tags/race" class="btn btn-info btn-xs">race</a><a href="/tags/schema" class="btn btn-info btn-xs">schema</a><a href="/tags/hybrid logical clock" class="btn btn-info btn-xs">hybrid logical clock</a><a href="/tags/memory" class="btn btn-info btn-xs">memory</a><a href="/tags/TiDB" class="btn btn-info btn-xs">TiDB</a><a href="/tags/pattern match" class="btn btn-info btn-xs">pattern match</a><a href="/tags/shen" class="btn btn-info btn-xs">shen</a><a href="/tags/context" class="btn btn-info btn-xs">context</a><a href="/tags/缤果盒子" class="btn btn-info btn-xs">缤果盒子</a><a href="/tags/variant" class="btn btn-info btn-xs">variant</a><a href="/tags/pool" class="btn btn-info btn-xs">pool</a><a href="/tags/goroutine" class="btn btn-info btn-xs">goroutine</a><a href="/tags/morestack" class="btn btn-info btn-xs">morestack</a><a href="/tags/RC" class="btn btn-info btn-xs">RC</a><a href="/tags/SI" class="btn btn-info btn-xs">SI</a><a href="/tags/opentracing" class="btn btn-info btn-xs">opentracing</a><a href="/tags/klambda" class="btn btn-info btn-xs">klambda</a><a href="/tags/优化" class="btn btn-info btn-xs">优化</a><a href="/tags/Cello" class="btn btn-info btn-xs">Cello</a><a href="/tags/fat pointer" class="btn btn-info btn-xs">fat pointer</a><a href="/tags/eval" class="btn btn-info btn-xs">eval</a><a href="/tags/ddl" class="btn btn-info btn-xs">ddl</a><a href="/tags/codegen" class="btn btn-info btn-xs">codegen</a><a href="/tags/expression" class="btn btn-info btn-xs">expression</a><a href="/tags/erlang" class="btn btn-info btn-xs">erlang</a><a href="/tags/withcancel" class="btn btn-info btn-xs">withcancel</a><a href="/tags/constant propagate" class="btn btn-info btn-xs">constant propagate</a><a href="/tags/KISS" class="btn btn-info btn-xs">KISS</a><a href="/tags/性能" class="btn btn-info btn-xs">性能</a><a href="/tags/macro" class="btn btn-info btn-xs">macro</a><a href="/tags/hygiene" class="btn btn-info btn-xs">hygiene</a><a href="/tags/er-macro-transform" class="btn btn-info btn-xs">er-macro-transform</a><a href="/tags/cora" class="btn btn-info btn-xs">cora</a><a href="/tags/module" class="btn btn-info btn-xs">module</a><a href="/tags/错误处理" class="btn btn-info btn-xs">错误处理</a><a href="/tags/contract" class="btn btn-info btn-xs">contract</a><a href="/tags/union store" class="btn btn-info btn-xs">union store</a><a href="/tags/calvin" class="btn btn-info btn-xs">calvin</a><a href="/tags/bytecode" class="btn btn-info btn-xs">bytecode</a><a href="/tags/JVM" class="btn btn-info btn-xs">JVM</a><a href="/tags/aurora" class="btn btn-info btn-xs">aurora</a><a href="/tags/tidb" class="btn btn-info btn-xs">tidb</a><a href="/tags/vm" class="btn btn-info btn-xs">vm</a><a href="/tags/executor" class="btn btn-info btn-xs">executor</a><a href="/tags/covariance" class="btn btn-info btn-xs">covariance</a><a href="/tags/GC" class="btn btn-info btn-xs">GC</a><a href="/tags/oberon" class="btn btn-info btn-xs">oberon</a><a href="/tags/sysbench" class="btn btn-info btn-xs">sysbench</a><a href="/tags/effect" class="btn btn-info btn-xs">effect</a><a href="/tags/await" class="btn btn-info btn-xs">await</a><a href="/tags/async" class="btn btn-info btn-xs">async</a><a href="/tags/promise" class="btn btn-info btn-xs">promise</a><a href="/tags/interface" class="btn btn-info btn-xs">interface</a><a href="/tags/privilege" class="btn btn-info btn-xs">privilege</a><a href="/tags/test" class="btn btn-info btn-xs">test</a><a href="/tags/inferno" class="btn btn-info btn-xs">inferno</a><a href="/tags/microKanren" class="btn btn-info btn-xs">microKanren</a><a href="/tags/miniKanren" class="btn btn-info btn-xs">miniKanren</a><a href="/tags/zenlife" class="btn btn-info btn-xs">zenlife</a><a href="/tags/domain" class="btn btn-info btn-xs">domain</a><a href="/tags/HLC" class="btn btn-info btn-xs">HLC</a><a href="/tags/distributed" class="btn btn-info btn-xs">distributed</a><a href="/tags/deadlock" class="btn btn-info btn-xs">deadlock</a><a href="/tags/encrypt" class="btn btn-info btn-xs">encrypt</a><a href="/tags/authentication" class="btn btn-info btn-xs">authentication</a><a href="/tags/binlog" class="btn btn-info btn-xs">binlog</a><a href="/tags/probability" class="btn btn-info btn-xs">probability</a><a href="/tags/hotspot" class="btn btn-info btn-xs">hotspot</a><a href="/tags/makefile" class="btn btn-info btn-xs">makefile</a><a href="/tags/cache" class="btn btn-info btn-xs">cache</a><a href="/tags/ffi" class="btn btn-info btn-xs">ffi</a><a href="/tags/itx" class="btn btn-info btn-xs">itx</a><a href="/tags/prepare" class="btn btn-info btn-xs">prepare</a><a href="/tags/code review" class="btn btn-info btn-xs">code review</a><a href="/tags/darkeden" class="btn btn-info btn-xs">darkeden</a><a href="/tags/dependent" class="btn btn-info btn-xs">dependent</a><a href="/tags/type" class="btn btn-info btn-xs">type</a><a href="/tags/koka" class="btn btn-info btn-xs">koka</a><a href="/tags/引用计数" class="btn btn-info btn-xs">引用计数</a><a href="/tags/algebraic effect" class="btn btn-info btn-xs">algebraic effect</a><a href="/tags/RWMutex" class="btn btn-info btn-xs">RWMutex</a><a href="/tags/软件工程" class="btn btn-info btn-xs">软件工程</a><a href="/tags/开发环境" class="btn btn-info btn-xs">开发环境</a><a href="/tags/code generation" class="btn btn-info btn-xs">code generation</a><a href="/tags/CI" class="btn btn-info btn-xs">CI</a><a href="/tags/regex" class="btn btn-info btn-xs">regex</a><a href="/tags/PEG" class="btn btn-info btn-xs">PEG</a><a href="/tags/architecture" class="btn btn-info btn-xs">architecture</a><a href="/tags/cloud native" class="btn btn-info btn-xs">cloud native</a><a href="/tags/gambit" class="btn btn-info btn-xs">gambit</a><a href="/tags/ebpf" class="btn btn-info btn-xs">ebpf</a><a href="/tags/bpftrace" class="btn btn-info btn-xs">bpftrace</a><a href="/tags/流控" class="btn btn-info btn-xs">流控</a><a href="/tags/oom" class="btn btn-info btn-xs">oom</a><a href="/tags/severless" class="btn btn-info btn-xs">severless</a><a href="/tags/coprocessor" class="btn btn-info btn-xs">coprocessor</a><a href="/tags/treadmill" class="btn btn-info btn-xs">treadmill</a><a href="/tags/MVCC" class="btn btn-info btn-xs">MVCC</a><a href="/tags/hole digging" class="btn btn-info btn-xs">hole digging</a><a href="/tags/NAT" class="btn btn-info btn-xs">NAT</a><a href="/tags/reverse proxying" class="btn btn-info btn-xs">reverse proxying</a><a href="/tags/tunnel" class="btn btn-info btn-xs">tunnel</a><a href="/tags/累积分布函数" class="btn btn-info btn-xs">累积分布函数</a><a href="/tags/eCDF" class="btn btn-info btn-xs">eCDF</a><a href="/tags/SEDA" class="btn btn-info btn-xs">SEDA</a><a href="/tags/top-of-stack-caching" class="btn btn-info btn-xs">top-of-stack-caching</a><a href="/tags/exception" class="btn btn-info btn-xs">exception</a><a href="/tags/resumable" class="btn btn-info btn-xs">resumable</a><a href="/tags/string" class="btn btn-info btn-xs">string</a><a href="/tags/ActivityPub" class="btn btn-info btn-xs">ActivityPub</a><a href="/tags/mastodon" class="btn btn-info btn-xs">mastodon</a><a href="/tags/schedule" class="btn btn-info btn-xs">schedule</a><a href="/tags/concurrent" class="btn btn-info btn-xs">concurrent</a><a href="/tags/lru" class="btn btn-info btn-xs">lru</a><a href="/tags/scale" class="btn btn-info btn-xs">scale</a><a href="/tags/recursive" class="btn btn-info btn-xs">recursive</a><a href="/tags/patch" class="btn btn-info btn-xs">patch</a><a href="/tags/go" class="btn btn-info btn-xs">go</a><a href="/tags/bazel" class="btn btn-info btn-xs">bazel</a><a href="/tags/union scan" class="btn btn-info btn-xs">union scan</a><a href="/tags/technical debt" class="btn btn-info btn-xs">technical debt</a><a href="/tags/library" class="btn btn-info btn-xs">library</a><a href="/tags/framework" class="btn btn-info btn-xs">framework</a><a href="/tags/queueing delay" class="btn btn-info btn-xs">queueing delay</a><a href="/tags/queueing theory" class="btn btn-info btn-xs">queueing theory</a><a href="/tags/queueing" class="btn btn-info btn-xs">queueing</a><a href="/tags/threaded-code" class="btn btn-info btn-xs">threaded-code</a><a href="/tags/jit" class="btn btn-info btn-xs">jit</a><a href="/tags/copy-and-patch" class="btn btn-info btn-xs">copy-and-patch</a><a href="/tags/fips" class="btn btn-info btn-xs">fips</a><a href="/tags/delimited-continuation" class="btn btn-info btn-xs">delimited-continuation</a><a href="/tags/tailfication" class="btn btn-info btn-xs">tailfication</a><a href="/tags/clean code" class="btn btn-info btn-xs">clean code</a><a href="/tags/design" class="btn btn-info btn-xs">design</a><a href="/tags/AI" class="btn btn-info btn-xs">AI</a><a href="/tags/软件事务内存" class="btn btn-info btn-xs">软件事务内存</a><a href="/tags/STM" class="btn btn-info btn-xs">STM</a><a href="/tags/debugger" class="btn btn-info btn-xs">debugger</a><a href="/tags/namebase" class="btn btn-info btn-xs">namebase</a><a href="/tags/r7rs" class="btn btn-info btn-xs">r7rs</a><a href="/tags/namespace" class="btn btn-info btn-xs">namespace</a><a href="/tags/package" class="btn btn-info btn-xs">package</a><a href="/tags/mark-sweep" class="btn btn-info btn-xs">mark-sweep</a><a href="/tags/mostly-copying" class="btn btn-info btn-xs">mostly-copying</a><a href="/tags/tailcall" class="btn btn-info btn-xs">tailcall</a><a href="/tags/cml" class="btn btn-info btn-xs">cml</a><a href="/tags/type checker" class="btn btn-info btn-xs">type checker</a><a href="/tags/gc" class="btn btn-info btn-xs">gc</a><a href="/tags/am40" class="btn btn-info btn-xs">am40</a><a href="/tags/旁路由" class="btn btn-info btn-xs">旁路由</a><a href="/tags/nas" class="btn btn-info btn-xs">nas</a><a href="/tags/tracing" class="btn btn-info btn-xs">tracing</a><a href="/tags/multicore" class="btn btn-info btn-xs">multicore</a><a href="/tags/concurrency" class="btn btn-info btn-xs">concurrency</a><a href="/tags/rust" class="btn btn-info btn-xs">rust</a><a href="/tags/cranelift" class="btn btn-info btn-xs">cranelift</a></div></div></div></div><hr /><footer><p class="nav navbar-nav navbar-right">Powered by <a href="https://clojure.org/">Clojure</a> &amp; <a href="//getbootstrap.com/">Bootstrap</a></p></footer></body></html>